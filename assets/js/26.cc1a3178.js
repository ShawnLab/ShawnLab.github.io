(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{407:function(e,t,a){"use strict";a.r(t);var r=a(2),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"安装插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装插件"}},[e._v("#")]),e._v(" 安装插件")]),e._v(" "),a("p",[e._v("搜索并安装如下插件:")]),e._v(" "),a("ul",[a("li",[e._v("增强参数化构建："),a("code",[e._v("Extended Choice Parameter Plug-In")])]),e._v(" "),a("li",[e._v("美观详细化报表："),a("code",[e._v("Allure Jenkins Plugin")])]),e._v(" "),a("li",[e._v("中文本地化插件："),a("code",[e._v("Localization: Chinese (Simplified)")])])]),e._v(" "),a("h2",{attrs:{id:"新建任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建任务"}},[e._v("#")]),e._v(" 新建任务")]),e._v(" "),a("p",[e._v("新建一个 "),a("code",[e._v("自由风格（Freestyle project）")]),e._v("的任务")]),e._v(" "),a("h3",{attrs:{id:"设置参数化构建过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置参数化构建过程"}},[e._v("#")]),e._v(" 设置参数化构建过程")]),e._v(" "),a("p",[e._v("参数化这里需要 4 个步骤")]),e._v(" "),a("p",[e._v("1、在 "),a("code",[e._v("General")]),e._v(" 下勾选"),a("code",[e._v("参数化构建过程（This project is parameterized）")])]),e._v(" "),a("p",[e._v("2、下拉添加参数选择 "),a("code",[e._v("Extended Choice Parameter")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/AddParameter.png",alt:"添加参数",title:"image"}})]),e._v(" "),a("p",[a("code",[e._v("参数化构建过程")]),e._v("的参数设置")]),e._v(" "),a("p",[a("code",[e._v("Name")]),e._v(" : 参数名")]),e._v(" "),a("p",[a("code",[e._v("Parameter Type")]),e._v(" : "),a("code",[e._v("Single Select")]),e._v(" 是单选， "),a("code",[e._v("Check Boxes")]),e._v(" 和 "),a("code",[e._v("Multiple Selection")]),e._v(" 两者都是多选，但后者要按住 "),a("code",[e._v("Ctrl")]),e._v(" 键，需要多一只手来操作，所以多选建议选择 "),a("code",[e._v("Check Boxes")])]),e._v(" "),a("p",[a("code",[e._v("Number of Visible Items")]),e._v(" : 设置下拉多选框的可见范围，有多少写多少")]),e._v(" "),a("p",[a("code",[e._v("Delimiter")]),e._v(" : 设置参数分隔符，默认为英文逗号")]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/ExtendedChoiceParameter.png",alt:"参数设置",title:"image"}})]),e._v(" "),a("p",[a("code",[e._v("Value")]),e._v(" : 可选的参数值，这里我填的是 Robot Framework 的命令行参数，"),a("code",[e._v("-i, --include <tag>")]),e._v(" 和 "),a("code",[e._v("-e, --exclude <tag>")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/ChooseSourceforValue.png",alt:"参数设置",title:"image"}})]),e._v(" "),a("p",[a("code",[e._v("Default value")]),e._v(" : 默认选中值")]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/ChooseSourceforDefault.png",alt:"参数设置",title:"image"}})]),e._v(" "),a("p",[a("code",[e._v("Description")]),e._v("：值的描述")]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/ChooseSourceforValueDescription.png",alt:"Description",title:"image"}})]),e._v(" "),a("p",[e._v("3、接下来参考上面的步骤再次添加一个 "),a("code",[e._v("Extended Choice Parameter")]),e._v("，"),a("code",[e._v("Parameter Type")]),e._v(" 选择 "),a("code",[e._v("Check Boxes")]),e._v("，"),a("code",[e._v("Delimiter")]),e._v(" 为 "),a("code",[e._v("OR")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/RobotFrameworkTags.png",alt:"参数设置",title:"image"}})]),e._v(" "),a("p",[e._v("4、配置 Appium Server 的地址参数，下拉添加参数选择 "),a("code",[e._v("String Parameter")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/AppiumServerAddress.png",alt:"参数设置",title:"image"}})]),e._v(" "),a("h3",{attrs:{id:"构建设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建设置"}},[e._v("#")]),e._v(" 构建设置")]),e._v(" "),a("p",[e._v("下拉"),a("code",[e._v("增加构建步骤")]),e._v("，选择 "),a("code",[e._v("Execute Windows batch command")]),e._v("，输入如下命令")]),e._v(" "),a("div",{staticClass:"language-batch extra-class"},[a("pre",{pre:!0,attrs:{class:"language-batch"}},[a("code",[a("span",{pre:!0,attrs:{class:"token command"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("echo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%Tags%")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%Server%")])]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("@")]),a("span",{pre:!0,attrs:{class:"token command"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("echo")]),e._v(" off")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token command"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ping")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("127")]),e._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("."),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("-n")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("6")]),e._v(" > nul")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token command"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("call")]),e._v(" python "),a("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("-m")]),e._v(" robot "),a("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("--variable")]),e._v(" HOST:"),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%Server%")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%Filter%")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%Tags%")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[e._v("--listener")]),e._v(" allure_robotframework "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("%WORKSPACE%")]),e._v("\\TestSuites\\")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token command"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("exit")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")])]),e._v("\n")])])]),a("p",[e._v("命令组成详解：")]),e._v(" "),a("p",[e._v("1、Build step "),a("code",[e._v("执行 Windows 批处理命令")]),e._v(" marked build as failure")]),e._v(" "),a("p",[e._v("原因：Jenkins 执行命令，会把命令生成一个批处理文件执行，而 robot 命令对于批处理来说是外部命令，所以要加 call 表示调用。而 Jenkins 执行 Windows 命令, 若退出代码不为 0 , 则 Jenkins 会将构建标记为失败，所以需要加上 exit 0 表示执行完成退出")]),e._v(" "),a("p",[e._v("解决方法：构建命令在 robot 前面加上 call，最后加上 exit 0")]),e._v(" "),a("h3",{attrs:{id:"构建后操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建后操作"}},[e._v("#")]),e._v(" 构建后操作")]),e._v(" "),a("p",[e._v("下拉"),a("code",[e._v("增加构建后操作步骤")]),e._v("，选择 "),a("code",[e._v("Allure Report")]),e._v("，Results 的 Path 栏 输入"),a("code",[e._v("output\\allure")]),e._v("，然后点击保存，至此项目已配置完成。")]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/AllureReport.png",alt:"参数设置",title:"image"}})]),e._v(" "),a("h2",{attrs:{id:"开始构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始构建"}},[e._v("#")]),e._v(" 开始构建")]),e._v(" "),a("p",[e._v("点击 "),a("code",[e._v("Build with Parameters")]),e._v(" 进入如下构建页面，点击"),a("code",[e._v("开始构建")]),e._v("会自动执行过滤后的测试用例.\n"),a("img",{attrs:{src:"/img/BuildRobotium.png",alt:"开始构建",title:"image"}})])])}),[],!1,null,null,null);t.default=s.exports}}]);